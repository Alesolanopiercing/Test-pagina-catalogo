<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Cat√°logo - Ale Solano Piercing</title>
<link href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative&display=swap" rel="stylesheet">
<style>
:root{
  /* üé® Paleta de colores */
  --bg:#fdfcfa;
  --text:#1e1e1e;
  --muted:#6b6b6b;
  --btn-bg:#1e1e1e;
  --btn-fore:#f4ede8;
  --card-bg:#ffffff;
  --pill-bg:#eee;
  --pill-active-bg:#1e1e1e;
  --pill-active-color:#f4ede8;
  --dark-bg:#1e1e1e;
  --light-text:#f4ede8;
}

body{
  font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial;
  background:var(--bg);
  color:var(--text);
  margin:0;
  padding-top:120px;
}

/* üîπ Header */
header{
  position:fixed;
  top:0; left:0; right:0;
  background:var(--dark-bg);
  color:var(--light-text);
  backdrop-filter:blur(8px);
  box-shadow:0 2px 10px rgba(0,0,0,0.08);
  z-index:100;
  border-bottom:none; /* ‚ùå quitamos la raya */
  margin-bottom:0; /* elimina espacio bajo el header */
}
nav{
  max-width:1000px;
  margin:auto;
  display:flex;
  flex-direction:column;
  align-items:center;
  padding:14px 20px;
  margin-bottom:0; /* evita espacio extra bajo el nav */
}
.logo{text-align:center;}
.logo .nombre{
  font-family:"Cinzel Decorative",serif;
  font-size:1.5rem;
  line-height:1.1;
  color:var(--light-text);
}
.logo .subtitulo{
  font-family:"Helvetica","Arial",sans-serif;
  font-size:0.95rem;
  letter-spacing:1px;
  margin-top:2px;
  color:var(--light-text);
}
.menu{margin-top:8px;}
.menu a{
  margin:0 10px;
  text-decoration:none;
  color:var(--light-text);
  font-size:0.95rem;
  transition:opacity .2s;
}
.menu a:hover{opacity:0.7;}

/* üîπ Cat√°logo */
#catalogo{
  background:var(--bg);
  color:var(--text);
  border-top:none; /* ‚ùå eliminamos la l√≠nea divisoria */
  margin-top:6px; /* üîπ solo 6px entre header y filtros */
}

.container{
  max-width:1000px;
  margin:auto;
  padding:28px;
}
.filters{
  display:flex;
  flex-wrap:wrap;
  gap:10px;
  justify-content:center;
  margin:8px 0;
}
.pill{
  padding:8px 14px;
  border-radius:50px;
  background:var(--pill-bg);
  cursor:pointer;
  transition:all .2s;
  border:none;
  font-size:0.95rem;
  box-shadow:0 2px 6px rgba(0,0,0,0.06);
}
.pill.active{
  background:var(--pill-active-bg);
  color:var(--pill-active-color);
  box-shadow:0 3px 8px rgba(0,0,0,0.12);
}

/* üîπ Dropdowns */
.dropdown{position:relative;display:inline-block;}
.dropdown-content{
  display:none;
  position:absolute;
  background:#fff;
  min-width:160px;
  border-radius:12px;
  box-shadow:0 4px 16px rgba(0,0,0,0.12);
  z-index:50;
  max-height:220px;
  overflow-y:auto;
  margin-top:6px;
  padding:6px 0;
}
.dropdown-content li{
  list-style:none;
  padding:6px 14px;
  cursor:pointer;
  transition:background .2s;
}
.dropdown-content li:hover{background:#f0f0f0;}
.dropdown-content li.selected{
  font-weight:bold;
  color:var(--text);
}

/* üîπ Tarjetas del cat√°logo */
.grid{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(220px,1fr));
  gap:18px;
  margin-top:12px;
}
.card{
  background:var(--card-bg);
  border-radius:12px;
  padding:14px;
  box-shadow:0 6px 18px rgba(0,0,0,0.08);
  display:flex;
  flex-direction:column;
  align-items:center;
  text-align:center;
  transition:transform .2s, box-shadow .2s;
}
.card:hover{
  transform:translateY(-4px);
  box-shadow:0 10px 28px rgba(0,0,0,0.12);
}
.card img{
  width:100%;
  height:180px;
  object-fit:cover;
  border-radius:10px;
  margin-bottom:10px;
  box-shadow:0 4px 12px rgba(0,0,0,0.08);
}
.card h3{
  margin:6px 0 4px;
  font-size:1rem;
}
.card p{
  margin:0;
  font-size:0.88rem;
  color:var(--muted);
}

/* üîπ Botones */
.btn{
  display:inline-block;
  padding:8px 14px;
  border-radius:8px;
  background:var(--btn-bg);
  color:var(--btn-fore);
  text-decoration:none;
  border:none;
  cursor:pointer;
  margin-top:10px;
  transition:all .2s;
  box-shadow:0 3px 8px rgba(0,0,0,0.15);
}
.btn:hover{
  box-shadow:0 6px 16px rgba(0,0,0,0.2);
  transform:translateY(-2px);
}
.muted{color:var(--muted);font-size:0.95rem;}

/* üîπ Modal */
#backdrop{
  display:none;
  position:fixed;
  inset:0;
  background:rgba(10,10,10,0.45);
  align-items:center;
  justify-content:center;
  z-index:80;
}
#backdrop>div{
  background:var(--card-bg);
  padding:20px;
  width:min(560px,92%);
  border-radius:12px;
  box-shadow:0 20px 40px rgba(0,0,0,0.25);
}
#closeModal{
  float:right;
  background:transparent;
  border:none;
  font-size:18px;
  cursor:pointer;
  color:var(--text);
}

@media (max-width:520px){
  .card img{height:140px;}
  .menu a{margin:0 6px;}
}
</style>
</head>
<body>

<header>
  <nav>
    <div class="logo">
      <div class="nombre">Ale Solano</div>
      <div class="subtitulo">Piercing</div>
    </div>
    <div class="menu">
      <a href="#inicio">Inicio</a>
      <a href="#catalogo">Cat√°logo</a>
      <a href="https://wa.me/50672894945" target="_blank">Contacto</a>
    </div>
  </nav>
</header>

<section id="inicio" class="container"></section>

<section id="catalogo" class="container">
  <div class="filters" id="filters"></div>
  <div class="grid" id="grid"></div>
</section>

<div id="backdrop">
  <div>
    <button id="closeModal">&times;</button>
    <h2 id="m-name"></h2>
    <div class="muted" id="m-desc"></div>
    <div><strong>Piercing:</strong> <span id="m-piercing"></span></div>
    <div><strong>Asegurado:</strong> <span id="m-asegurado"></span></div>
    <div><strong>Tipo:</strong> <span id="m-tipo"></span></div>
    <div><strong>Mil√≠metros:</strong> <span id="m-mm"></span></div>
    <div><strong>Calibre:</strong> <span id="m-calibre"></span></div>
    <div><strong>Gema:</strong> <span id="m-gema"></span></div>
    <div><strong>Precio con perforaci√≥n:</strong> <span id="m-price-with"></span></div>
    <div><strong>Precio sin perforaci√≥n:</strong> <span id="m-price-without"></span></div>
    <a id="whatsappBtn" class="btn" href="#" target="_blank">Contactar por WhatsApp</a>
  </div>
</div>

<script>
const SHEET_CSV_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vRLUThv9Dh48AXM3FvIQW1OfP5OziNvbWAk_NcXZozJGwWYxES3ycMkmO4l59lbhQGSZYun30xErkkz/pub?output=csv";
const WHATSAPP_NUM = "50672894945";
const PLACEHOLDER = "https://via.placeholder.com/400x300?text=sin+imagen";
let items=[], activeTipo="", activePiercing=[], activeAseg="", activeGema="";
function parseCSV(text){
  const lines=text.trim().split("\n");
  const headers=lines.shift().split(",").map(h=>h.trim().replace(/^"|"$/g,""));
  return lines.map(line=>{
    const values=line.match(/("([^"]|"")*"|[^,]+)(?=,|$)/g)||[];
    const obj={};
    headers.forEach((h,i)=>{ let v=(values[i]||"").trim(); if(v.startsWith('"')&&v.endsWith('"')) v=v.slice(1,-1).replace(/""/g,'"'); obj[h]=v; });
    return obj;
  });
}
function extractDriveId(url){ if(!url) return null; url=url.trim(); let m=url.match(/\/file\/d\/([a-zA-Z0-9_-]{10,})/); if(m) return m[1]; m=url.match(/[?&]id=([a-zA-Z0-9_-]{10,})/); if(m) return m[1]; m=url.match(/\/d\/([a-zA-Z0-9_-]{10,})/); if(m) return m[1]; m=url.match(/^([a-zA-Z0-9_-]{10,})$/); if(m) return m[1]; return null;}
function driveUrlsFromAny(url){ const id=extractDriveId(url); if(!id) return [url||PLACEHOLDER]; return [`https://drive.google.com/uc?export=view&id=${id}`,`https://drive.google.com/uc?export=download&id=${id}`,`https://drive.google.com/thumbnail?id=${id}&sz=w1200`];}
function createSmartImg(originalUrl, alt){ const img=document.createElement("img"); img.alt=alt||""; img.dataset.original=originalUrl||""; img.style.opacity="0"; const urls=driveUrlsFromAny(originalUrl); let idx=0; const tried=[]; function tryNext(){ if(idx>=urls.length){ img.src=PLACEHOLDER; img.dataset.status="failed"; img.style.opacity="1"; return; } const src=urls[idx++]; tried.push(src); const tester=new Image(); tester.onload=()=>{ img.src=src; img.dataset.status="loaded"; img.style.opacity="1"; }; tester.onerror=()=>setTimeout(tryNext,120); tester.src=src + (src.includes('?') ? '&cb=' : '?cb=') + Date.now(); } tryNext(); return img;}
function unique(values, key, splitChar="/"){ const set=new Set(); values.forEach(v=>{ if(v[key]){ v[key].split(splitChar).forEach(val=>{ const clean=val.trim(); if(clean) set.add(clean); }); } }); return Array.from(set).sort();}
function renderFilters(){ const container=document.getElementById("filters"); container.innerHTML=""; createDropdown(container,"Tipo",["Todos",...unique(items,"Tipo")], v=>{ activeTipo=v==="Todos"?"":v; renderGrid(); }); createDropdown(container,"Piercings",unique(items,"Piercing"), v=>{ if(activePiercing.includes(v)) activePiercing=activePiercing.filter(x=>x!==v); else activePiercing.push(v); renderGrid(); }); createDropdown(container,"Asegurado",["Todos",...unique(items,"Asegurado")], v=>{ activeAseg=v==="Todos"?"":v; renderGrid(); }); createDropdown(container,"Gema",["Todos",...unique(items,"Gema")], v=>{ activeGema=v==="Todos"?"":v; renderGrid(); });}
function createDropdown(container,label,options,onSelect){ const dd=document.createElement("div"); dd.className="dropdown"; const btn=document.createElement("button"); btn.className="pill"; btn.textContent=label; dd.appendChild(btn); const list=document.createElement("ul"); list.className="dropdown-content"; options.forEach(opt=>{ const li=document.createElement("li"); li.textContent=opt; li.onclick=()=>{ onSelect(opt); updateDropdownSelection(); list.style.display="none"; }; list.appendChild(li); }); dd.appendChild(list); btn.onclick=()=>{ list.style.display=list.style.display==="block"?"none":"block"; }; container.appendChild(dd); function updateDropdownSelection(){ const lis=list.querySelectorAll("li"); lis.forEach(li=>{ if(label==="Piercings") li.classList.toggle("selected", activePiercing.includes(li.textContent)); else if(label==="Tipo") li.classList.toggle("selected", li.textContent===activeTipo); else if(label==="Asegurado") li.classList.toggle("selected", li.textContent===activeAseg); else if(label==="Gema") li.classList.toggle("selected", li.textContent===activeGema); }); btn.classList.toggle("active",(label==="Piercings" && activePiercing.length>0)||(label==="Tipo" && activeTipo)||(label==="Asegurado" && activeAseg)||(label==="Gema" && activeGema)); }}
async function loadData(){ try{ const res=await fetch(SHEET_CSV_URL); const txt=await res.text(); items=parseCSV(txt); renderFilters(); renderGrid(); }catch(e){ console.error("Error cargando CSV:",e); document.getElementById("grid").innerHTML="<p style='color:#b00'>No pude cargar la hoja. Revisa el enlace CSV.</p>"; }}
function renderGrid(){ const grid=document.getElementById("grid"); const filtered=items.filter(it=>{ const piercings=it.Piercing?it.Piercing.split("/").map(x=>x.trim()):[]; const okTipo=activeTipo? it.Tipo===activeTipo : true; const okPiercing=activePiercing.length? activePiercing.some(p=>piercings.includes(p)) : true; const okAseg=activeAseg? it.Asegurado===activeAseg : true; const okGema=activeGema? it.Gema===activeGema : true; return okTipo && okPiercing && okAseg && okGema; }); if(filtered.length===0){ grid.innerHTML="<p style='text-align:center; color:var(--muted)'>No hay joyas que coincidan con esos filtros.</p>"; return; } grid.innerHTML=""; filtered.forEach(it=>{ const card=document.createElement("div"); card.className="card"; const img=createSmartImg(it.Foto,it.Nombre); card.appendChild(img); const h3=document.createElement("h3"); h3.textContent=it.Nombre||"‚Äî"; card.appendChild(h3); const p=document.createElement("p"); p.className="muted"; p.textContent=`${it.Piercing || '‚Äî'} ¬∑ ${it.Asegurado || '‚Äî'}`; card.appendChild(p); const btn=document.createElement("button"); btn.className="btn"; btn.textContent="M√°s informaci√≥n"; btn.onclick=()=>openModal(it); card.appendChild(btn); grid.appendChild(card); });}
document.getElementById("closeModal").onclick=()=>document.getElementById("backdrop").style.display="none";
function openModal(it){ document.getElementById("m-name").textContent=it.Nombre; document.getElementById("m-desc").textContent=it.Descripcion||""; document.getElementById("m-piercing").textContent=it.Piercing||"‚Äî"; document.getElementById("m-asegurado").textContent=it.Asegurado||"‚Äî"; document.getElementById("m-tipo").textContent=it.Tipo||"‚Äî"; document.getElementById("m-mm").textContent=it.Milimetros||"‚Äî"; document.getElementById("m-calibre").textContent=it.Calibre||"‚Äî"; document.getElementById("m-gema").textContent=it.Gema||"‚Äî"; document.getElementById("m-price-with").textContent=it["Precio con perforaci√≥n"]?"‚Ç°"+Number(it["Precio con perforaci√≥n"]).toLocaleString():"‚Äî"; document.getElementById("m-price-without").textContent=it["Precio sin perforaci√≥n"]?"‚Ç°"+Number(it["Precio sin perforaci√≥n"]).toLocaleString():"‚Äî"; const msg=encodeURIComponent(`Hola, quiero m√°s info sobre "${it.Nombre}" (${it.Piercing} - ${it.Asegurado}). Precio con perforaci√≥n: ${it["Precio con perforaci√≥n"]}, sin perforaci√≥n: ${it["Precio sin perforaci√≥n"]}.`); document.getElementById("whatsappBtn").href=`https://wa.me/${WHATSAPP_NUM}?text=${msg}`; document.getElementById("backdrop").style.display="flex";}
window.onclick=e=>{ if(e.target.id==="backdrop") document.getElementById("backdrop").style.display="none"; };
loadData();
</script>
</body>
</html>
